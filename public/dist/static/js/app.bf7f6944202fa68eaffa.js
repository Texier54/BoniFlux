webpackJsonp([1],{"3jVL":function(t,e){},BvSW:function(t,e){},EmFY:function(t,e){},HMF8:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("mvHQ"),i=s.n(a),n=s("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},r=s("VU/8")({name:"app",components:{},mounted:function(){this.$store.state.member||this.$router.push({path:"/"})}},o,!1,function(t){s("vbkI")},null,null).exports,c=s("/ocq"),l={name:"navBar",data:function(){return{}},mounted:function(){var t=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);t.length>0&&t.forEach(function(t){t.addEventListener("click",function(){var e=t.dataset.target,s=document.getElementById(e);t.classList.toggle("is-active"),s.classList.toggle("is-active")})})},methods:{quitter:function(){window.bus.$emit("quitterPartie")},logOut:function(){window.bus.$emit("logout")},suspendre:function(){window.bus.$emit("suspendrePartie")}}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("nav",{staticClass:"navbar is-dark"},[this._m(0),this._v(" "),e("div",{staticClass:"navbar-menu",attrs:{id:"navMenu"}},[e("div",{staticClass:"navbar-end"},[e("router-link",{directives:[{name:"show",rawName:"v-show",value:"/abonnements"!==this.$route.path,expression:"this.$route.path !=='/abonnements'"}],staticClass:"nav btn button is-success is-medium has-text-weight-semibold",attrs:{to:{name:"abonnements",params:{}}}},[e("i",{staticClass:"marker fas fa-folder-open "}),this._v("Abonnement")]),this._v(" "),e("button",{staticClass:"nav btn button is-danger is-medium has-text-weight-semibold",on:{click:this.logOut}},[e("i",{staticClass:"fas fa-power-off"}),this._v("Deconnexion")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"navbar-brand"},[e("a",{staticClass:"navbar-item",attrs:{href:"/"}},[e("b",{staticClass:"is-size-2"},[e("i",{staticClass:"marker fas fa-video"}),this._v("BoniFlux")])]),this._v(" "),e("button",{staticClass:"button navbar-burger btnreduc",attrs:{"data-target":"navMenu"}},[e("span"),this._v(" "),e("span"),this._v(" "),e("span")])])}]},d=s("VU/8")(l,u,!1,function(t){s("sJDp")},"data-v-81dfd846",null).exports,m={props:["stream"],name:"listeStream",data:function(){return{user:""}},mounted:function(){var t=this;window.axios.get("user/"+this.stream.id_user).then(function(e){t.user=e.data}).catch(function(t){})}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"column is-2"},[s("img",{staticClass:"Timg",attrs:{src:"http://download.seaicons.com/icons/iconsmind/outline/512/Webcam-icon.png"}}),t._v(" "),s("div",{staticClass:"contentStream"},[s("p",[t._v(t._s(t.stream.nom))]),t._v(" "),0==t.stream.anonyme?s("strong",[t._v(t._s(t.user.pseudo))]):t._e(),t._v(" "),s("i",[1==t.stream.anonyme?s("strong",[t._v("Anonyme")]):t._e()])]),t._v(" "),s("div",{staticClass:"has-text-centered data"},[s("router-link",{staticClass:"button is-success",attrs:{to:{name:"diffusion",params:{id:t.stream.id}}}},[s("i",{staticClass:"fas fa-eye marker"}),t._v("Regarder")])],1)])},staticRenderFns:[]},p={name:"accueil",components:{NavBar:d,listeStream:s("VU/8")(m,v,!1,function(t){s("oNFK")},"data-v-8b1a9c26",null).exports},data:function(){return{streams:"",modalCo:!1,modalIn:!1,modalStart:!1,nom:"",prenom:"",email:"",password:"",pseudo:"",nomStream:"",descriptionStream:"",urgence:!1,anonyme:!1,publique:!0,visiteur:!0}},mounted:function(){var t=this;"visiteur"==this.$store.state.token&&(this.visiteur=!1),this.$store.state.member||(this.modalCo=!0),window.bus.$on("logout",function(){t.$router.push({path:"/"}),t.$store.commit("setMember",!1),t.$store.commit("setToken",!1),t.$router.push({path:"/"}),t.modalCo=!0}),window.axios.get("streams").then(function(e){t.streams=e.data}).catch(function(t){})},methods:{seConnecter:function(){var t=this;window.axios.post("members/signin",{email:this.email,password:this.password}).then(function(e){t.$store.commit("setMember",e.data.member),t.$store.commit("setToken",e.data.token),t.$router.push({path:"/"}),t.modalCo=!1}).catch(function(t){console.log(t),alert(t)})},creerMembre:function(){var t=this;window.axios.post("members",{nom:this.nom,prenom:this.prenom,pseudo:this.pseudo,email:this.email,password:this.password}).then(function(e){console.log(e.data),alert("Le membre "+e.data.pseudo+" a été créé. Vous pouvez vous connecter"),t.$router.push({path:"/connexion"}),t.modalCo=!0,t.modalIn=!1}).catch(function(t){alert(t)})},openStream:function(){!1===this.visiteur?alert("Vous ne pouvez pas démarrer un stream en tant que visiteur"):this.modalStart=!0},demarrerStream:function(){var t=this;window.axios.post("createStream",{nomStream:this.nomStream,descriptionStream:this.descriptionStream,urgence:this.urgence,anonyme:this.anonyme,publique:this.publique,id_user:this.$store.state.member.id}).then(function(e){t.$router.push({path:"/emission"}),t.modalStart=!1}).catch(function(t){alert(t)})},modeVisiteur:function(){this.$store.commit("setMember","Visiteur"),this.$store.commit("setToken","visiteur"),this.$router.push({path:"/"}),this.modalCo=!1}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav-bar"),t._v(" "),s("section",{staticClass:"section coop-accueil"},[s("nav",{staticClass:"panel"},[s("p",{staticClass:"panel-heading is-size-4 has-text-weight-semibold has-text-info"},[t._v("\n        Bienvenue sur BoniFlux !!!\n      ")]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"has-text-centered is-marginless"},[s("button",{staticClass:"button is-link is-large is-capitalized has-text-weight-bold",on:{click:t.openStream}},[s("i",{staticClass:"marker fas fa-circle",staticStyle:{color:"red"}}),t._v("Démarrer le Stream")]),t._v(" "),s("router-link",{staticClass:"button is-link is-large is-capitalized has-text-weight-bold",attrs:{to:{name:"record"}}},[s("i",{staticClass:"marker fas fa-circle",staticStyle:{color:"red"}}),t._v("Record")])],1)]),t._v(" "),t._m(1),t._v(" "),s("div",{staticClass:"end"}),t._v(" "),s("div",{staticClass:"columns"},[t._l(t.streams,function(t){return s("listeStream",{key:t.id,attrs:{stream:t}})}),t._v(" "),s("div",{staticClass:"column is-2"},[s("router-link",{directives:[{name:"show",rawName:"v-show",value:"/abonnements"!==this.$route.path,expression:"this.$route.path !=='/abonnements'"}],staticClass:"nav btn button is-success is-medium btnPLus",attrs:{to:{name:"streams",params:{}}}},[s("i",{staticClass:"marker fas fa-plus-circle"}),t._v("Plus")])],1)],2),t._v(" "),s("div",{staticClass:"columns"})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.modalCo,expression:"modalCo"}],staticClass:"modal is-active"},[s("div",{staticClass:"modal-background-gray"}),t._v(" "),s("div",{staticClass:"modal-card"},[t._m(2),t._v(" "),s("form",{on:{submit:t.seConnecter}},[s("section",{staticClass:"modal-card-body"},[s("label",{staticClass:"label"},[t._v("E-mail")]),t._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"text",placeholder:"E-mail",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),s("label",{staticClass:"label"},[t._v("Mot de passe")]),t._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Mot de passe",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),s("footer",{staticClass:"modal-card-foot"},[s("input",{staticClass:"button is-success",attrs:{type:"submit",value:"Connexion"}}),t._v(" "),s("button",{staticClass:"button",on:{click:function(e){t.modalCo=!1,t.modalIn=!0}}},[t._v("Inscription")]),t._v(" "),s("a",{staticClass:"button",on:{click:t.modeVisiteur}},[t._v("Mode Visiteur")])])])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.modalIn,expression:"modalIn"}],staticClass:"modal is-active"},[s("div",{staticClass:"modal-background-gray"}),t._v(" "),s("div",{staticClass:"modal-card"},[t._m(3),t._v(" "),s("form",{on:{submit:t.creerMembre}},[s("section",{staticClass:"modal-card-body"},[s("label",{staticClass:"label"},[t._v("Nom")]),t._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.nom,expression:"nom"}],staticClass:"input",attrs:{type:"text",placeholder:"Nom",required:""},domProps:{value:t.nom},on:{input:function(e){e.target.composing||(t.nom=e.target.value)}}})]),t._v(" "),s("label",{staticClass:"label"},[t._v("Prénom")]),t._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.prenom,expression:"prenom"}],staticClass:"input",attrs:{type:"text",placeholder:"Prénom",required:""},domProps:{value:t.prenom},on:{input:function(e){e.target.composing||(t.prenom=e.target.value)}}})]),t._v(" "),s("label",{staticClass:"label"},[t._v("Pseudo")]),t._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.pseudo,expression:"pseudo"}],staticClass:"input",attrs:{type:"text",placeholder:"Pseudo",required:""},domProps:{value:t.pseudo},on:{input:function(e){e.target.composing||(t.pseudo=e.target.value)}}})]),t._v(" "),s("label",{staticClass:"label"},[t._v("E-mail")]),t._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"text",placeholder:"E-mail",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),s("label",{staticClass:"label"},[t._v("Mot de passe")]),t._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Mot de passe",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),s("footer",{staticClass:"modal-card-foot"},[s("input",{staticClass:"button is-success",attrs:{type:"submit",value:"S'inscrire"}}),t._v(" "),s("a",{staticClass:"button",on:{click:function(e){t.modalCo=!0,t.modalIn=!1}}},[t._v("Connexion")])])])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.modalStart,expression:"modalStart"}],staticClass:"modal is-active"},[s("div",{staticClass:"modal-background"}),t._v(" "),s("div",{staticClass:"modal-card"},[t._m(4),t._v(" "),s("form",{on:{submit:t.demarrerStream}},[s("section",{staticClass:"modal-card-body"},[s("label",{staticClass:"label"},[t._v("Nom du stream")]),t._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.nomStream,expression:"nomStream"}],staticClass:"input",attrs:{type:"text",placeholder:"Nom du stream",required:""},domProps:{value:t.nomStream},on:{input:function(e){e.target.composing||(t.nomStream=e.target.value)}}})]),t._v(" "),s("label",{staticClass:"label"},[t._v("Description")]),t._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.descriptionStream,expression:"descriptionStream"}],staticClass:"input",attrs:{type:"text",placeholder:"Description"},domProps:{value:t.descriptionStream},on:{input:function(e){e.target.composing||(t.descriptionStream=e.target.value)}}})]),t._v(" "),s("label",{staticClass:"label"},[t._v("Activer le mode Urgence ?")]),t._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.urgence,expression:"urgence"}],attrs:{id:"checkBox",type:"checkbox"},domProps:{checked:Array.isArray(t.urgence)?t._i(t.urgence,null)>-1:t.urgence},on:{change:function(e){var s=t.urgence,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&(t.urgence=s.concat([null])):n>-1&&(t.urgence=s.slice(0,n).concat(s.slice(n+1)))}else t.urgence=i}}})]),t._v(" "),s("label",{staticClass:"label"},[t._v("Stream anonyme ?")]),t._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.anonyme,expression:"anonyme"}],attrs:{id:"checkBox",type:"checkbox"},domProps:{checked:Array.isArray(t.anonyme)?t._i(t.anonyme,null)>-1:t.anonyme},on:{change:function(e){var s=t.anonyme,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&(t.anonyme=s.concat([null])):n>-1&&(t.anonyme=s.slice(0,n).concat(s.slice(n+1)))}else t.anonyme=i}}})]),t._v(" "),s("label",{staticClass:"label"},[t._v("Rendre la vidéo publique ? (Vous pourrez la rendre publique durant le stream)")]),t._v(" "),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.publique,expression:"publique"}],attrs:{id:"checkBox",type:"checkbox"},domProps:{checked:Array.isArray(t.publique)?t._i(t.publique,null)>-1:t.publique},on:{change:function(e){var s=t.publique,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&(t.publique=s.concat([null])):n>-1&&(t.publique=s.slice(0,n).concat(s.slice(n+1)))}else t.publique=i}}})])]),t._v(" "),s("footer",{staticClass:"modal-card-foot"},[s("input",{staticClass:"button is-success",attrs:{type:"submit",value:"Créer un stream"}}),t._v(" "),s("button",{staticClass:"button",on:{click:function(e){t.modalStart=!1}}},[t._v("Annuler")])])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"panel-block"},[e("p",{staticClass:"control has-icons-left is-size-5"},[this._v("\n            Une application web permettant de simplement diffuser en direct des flux vidéos, d'enregistrer ces flux et d'ensuite les gérer (classer, partager, supprimer, travailler la vidéo, etc.).\n        ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"border"},[e("div",{staticClass:"is-size-2 has-text-centered is-capitalized has-text-weight-bold"},[e("p",[this._v("Liste des streams en cours")])]),this._v(" "),e("div",{staticClass:"is-size-6 has-text-centered has-text-weight-semibold"},[e("p",[this._v("(La liste n'est qu'un aperçus)")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[this._v("Connexion")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[this._v("Inscription")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[this._v("Initialiser le stream")])])}]},f=s("VU/8")(p,h,!1,function(t){s("q2aQ")},"data-v-52ea5fa9",null).exports,_={name:"emission",components:{NavBar:d},data:function(){return{video:{},canvas:{},captures:[],intervalProgress:"",messages:"",editMessage:"",visiteur:!1}},mounted:function(){var t=this;this.video=this.$refs.video,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(e){t.video.src=window.URL.createObjectURL(e),t.video.play()})},methods:{capture:function(){this.canvas=this.$refs.canvas;this.canvas.getContext("2d").drawImage(this.video,0,0,640,480);this.captures.push(canvas.toDataURL("image/png"))},demarrer:function(){console.log("Je stream")},saveMess:function(){alert("Not Working")}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav-bar"),t._v(" "),s("section",{staticClass:"container"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-8"},[s("a",{staticClass:"btn button is-link",on:{click:t.demarrer}},[t._v("Démarer")]),t._v(" "),s("div",[s("video",{ref:"video",staticClass:"video",attrs:{id:"video",autoplay:""}})]),t._v(" "),s("div",[s("button",{staticClass:"btn button is-success",attrs:{id:"snap"},on:{click:function(e){t.capture()}}},[t._v("Snap Photo")])]),t._v(" "),s("canvas",{ref:"canvas",attrs:{id:"canvas",width:"640",height:"480"}}),t._v(" "),s("ul",t._l(t.captures,function(t){return s("li",[s("img",{attrs:{src:t,height:"50"}})])}))]),t._v(" "),s("div",{staticClass:"column is-4"},[s("h2",[t._v("Chat")]),t._v(" "),s("div",{staticClass:"listemessage",attrs:{id:"messages"}},t._l(t.messages,function(t){return s("message",{key:t.id,attrs:{message:t}})})),t._v(" "),t.visiteur?s("input",{directives:[{name:"model",rawName:"v-model",value:t.editMessage,expression:"editMessage"}],staticClass:"input",attrs:{placeholder:"Message"},domProps:{value:t.editMessage},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.saveMess(e)},input:function(e){e.target.composing||(t.editMessage=e.target.value)}}}):s("input",{staticClass:"input",attrs:{placeholder:"Vous ne pouvez pas envoyer de message sur votre stream",disabled:""}})])])])],1)},staticRenderFns:[]},g=s("VU/8")(_,b,!1,function(t){s("3jVL")},"data-v-58bf5dc2",null).exports,C={props:["message"],name:"message",data:function(){return{user:""}},mounted:function(){var t=this;window.axios.get("user/"+this.message.id_user).then(function(e){t.user=e.data}).catch(function(t){})}},w={render:function(){var t=this.$createElement;return(this._self._c||t)("p",[this._v(this._s(this.user.pseudo)+" : "+this._s(this.message.texte))])},staticRenderFns:[]},x={name:"diffusion",components:{NavBar:d,message:s("VU/8")(C,w,!1,function(t){s("nYOZ")},"data-v-de3963c0",null).exports},data:function(){return{map:"",messages:"",editMessage:"",stream:"",abonnements:"",ifabo:!0,visiteur:!0}},methods:{abo:function(){var t=this;0==this.visiteur?alert("Vous ne pouvez pas vous abonner en tant que visiteur"):window.axios.post("abonnement",{id_streamer:this.stream.id_user,id_abonne:this.$store.state.member.id}).then(function(e){t.ifabo=!1}).catch(function(t){alert(t)})},saveMess:function(){var t=this;window.axios.post("messages/"+this.$route.params.id,{message:this.editMessage,id_stream:this.$route.params.id,id_user:this.$store.state.member.id}).then(function(e){t.editMessage="",window.axios.get("messages/"+t.$route.params.id).then(function(e){t.messages=e.data,window.setInterval(function(){var t=document.getElementById("messages");t.scrollTop=t.scrollHeight},100)}).catch(function(t){alert(t)})}).catch(function(t){alert(t)})}},mounted:function(){var t=this;"visiteur"==this.$store.state.token?this.visiteur=!1:window.axios.get("abonnements/"+this.$store.state.member.id).then(function(e){t.abonnements=e.data;for(var s=0;s<t.abonnements.length;s++)t.abonnements[s].id_streamer==t.stream.id_user&&(t.ifabo=!1)}).catch(function(t){}),window.axios.get("stream/"+this.$route.params.id).then(function(e){t.stream=e.data,t.map=L.map("map",{center:[t.stream.latitude,t.stream.longitude],zoom:12}),L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:"Boniflux",minZoom:1,maxZoom:16}).addTo(t.map)}).catch(function(t){}),window.axios.get("messages/"+this.$route.params.id).then(function(e){t.messages=e.data,window.setInterval(function(){var t=document.getElementById("messages");t.scrollTop=t.scrollHeight},500)}).catch(function(t){})}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav-bar"),t._v(" "),s("section",{staticClass:"container"},[s("div",{staticClass:"columns main"},[s("div",{staticClass:"mainvideo column is-8"},[s("h2",{staticClass:"is-size-1"},[t._v(t._s(t.stream.nom))]),t._v(" "),s("video",{attrs:{src:"https://www.youtube.com/embed/yZLRrNFZN50?autoplay=0",controls:"controls"}})]),t._v(" "),s("div",{staticClass:"column is-4"},[s("h2",[t._v("Chat")]),t._v(" "),s("div",{staticClass:"listemessage",attrs:{id:"messages"}},t._l(t.messages,function(t){return s("message",{key:t.id,attrs:{message:t}})})),t._v(" "),t.visiteur?s("input",{directives:[{name:"model",rawName:"v-model",value:t.editMessage,expression:"editMessage"}],staticClass:"input",attrs:{placeholder:"Message"},domProps:{value:t.editMessage},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.saveMess(e)},input:function(e){e.target.composing||(t.editMessage=e.target.value)}}}):s("input",{staticClass:"input",attrs:{placeholder:"Vous ne pouvez pas parle en visiteur",disabled:""}})])]),t._v(" "),s("div",{},[s("div",{staticClass:"btnAbo"},[s("a",{directives:[{name:"show",rawName:"v-show",value:t.ifabo,expression:"ifabo"}],staticClass:"button is-link has-text-weight-semibold",on:{click:t.abo}},[t._v("S'abonner")]),t._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:!t.ifabo,expression:"!ifabo"}],staticClass:"button is-danger has-text-weight-semibold"},[t._v("Se désabonner")])])]),t._v(" "),t._m(0)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("div",{attrs:{id:"map"}})])}]},k=s("VU/8")(x,y,!1,function(t){s("EmFY")},"data-v-06dc8f55",null).exports,$={props:["abonnement"],name:"abonnement",components:{},data:function(){return{user:""}},methods:{desabonner:function(){window.axios.post("desabonnement/",{id_streamer:this.abonnement.id_streamer,id_abonne:this.$store.state.member.id}).then(function(t){alert("Vous vous êtes désabonner !"),window.bus.$emit("updateAbonnements")}).catch(function(t){alert(t)})}},mounted:function(){var t=this;window.axios.get("user/"+this.abonnement.id_streamer).then(function(e){t.user=e.data}).catch(function(t){})}},S={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"column is-4"},[e("strong",[this._v(this._s(this.user.pseudo))]),e("br"),this._v(" "),e("div",{staticClass:"pseudo"},[e("router-link",{staticClass:"button is-success has-text-weight-semibold",attrs:{to:{name:"diffusion",params:{id:1}}}},[this._v("Profil")]),this._v(" "),e("a",{staticClass:"button has-text-weight-semibold",on:{click:this.desabonner}},[this._v("Désabonner")])],1)])},staticRenderFns:[]},N={name:"abonnements",components:{NavBar:d,abonnement:s("VU/8")($,S,!1,function(t){s("bhIa")},"data-v-a051f06e",null).exports},data:function(){return{abonnements:"",visiteur:!0}},mounted:function(){var t=this;"visiteur"==this.$store.state.token?this.visiteur=!1:window.axios.get("abonnements/"+this.$store.state.member.id).then(function(e){t.abonnements=e.data}).catch(function(t){}),window.bus.$on("updateAbonnements",function(){window.axios.get("abonnements/"+t.$store.state.member.id).then(function(e){t.abonnements=e.data}).catch(function(t){})})}},M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("nav-bar"),this._v(" "),e("section",[this._m(0),this._v(" "),this.visiteur?e("div",{staticClass:"columns contentAbonnement"},this._l(this.abonnements,function(t){return e("abonnement",{key:t.id,attrs:{abonnement:t}})})):e("div",{staticClass:"columns"},[e("p",{staticClass:"column is-12",staticStyle:{"text-align":"center"}},[this._v("Vous n'avez pas d'abonnements en tant que visiteur")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"titre"},[e("h2",[this._v("Vos abonnements")])])}]},E=s("VU/8")(N,M,!1,function(t){s("yalm")},"data-v-528b7a48",null).exports,q={name:"record",components:{NavBar:d},data:function(){return{video:{},theStream:"",theRecorder:"",recordedChunks:[],constraints:{video:{width:{max:320}},audio:!0},clipName:"",ifstart:!1,file:"",title:"",description:""}},mounted:function(){},methods:{start:function(){var t=this;this.ifstart=!0,navigator.mediaDevices.getUserMedia(this.constraints).then(function(e){t.theStream=e;document.querySelector("video").src=URL.createObjectURL(e);try{var s=new MediaRecorder(e,{mimeType:"video/webm"})}catch(t){return void console.error("Exception while creating MediaRecorder: "+t)}t.theRecorder=s,s.ondataavailable=function(e){t.recordedChunks.push(e.data)},s.start(100)}).catch(function(t){console.error("getUserMedia() failed: "+t)})},download:function(){this.theRecorder.stop(),this.theStream.getTracks().forEach(function(t){t.stop()}),this.clipName=prompt("Le nom de l'enregistrement");var t=new Blob(this.recordedChunks,{type:"video/webm"}),e=URL.createObjectURL(t),s=document.createElement("a");document.body.appendChild(s),s.style="display: none",s.href=e,s.download=this.clipName+".webm",s.click(),setTimeout(function(){URL.revokeObjectURL(e)},100)},postvideo:function(t){var e=new FormData;e.append("video",this.file),e.append("title",this.title),e.append("description",this.description),e.append("id_user",this.$store.state.member.id),window.axios.post("postvideo/",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){alert("La video à bien été upload")}).catch(function(){alert("Une erreur est survenu")}),this.title="",this.$refs.file="",this.file=""},handleFileUpload:function(){this.file=this.$refs.file.files[0]}}},R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav-bar"),t._v(" "),s("section",{staticClass:"container"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-7",staticStyle:{height:"500px"}},[s("br"),t._v(" "),s("a",{staticClass:"button is-success",class:{"is-warning":t.ifstart},attrs:{id:"startButton"},on:{click:t.start}},[t._v("Start")]),t._v(" "),s("a",{staticClass:"button is-link",attrs:{id:"downloadButton"},on:{click:t.download}},[t._v("Download")]),t._v(" "),s("br"),s("br"),t._v(" "),s("div",[s("video",{ref:"video",attrs:{id:"video",width:"640",height:"480",autoplay:""}})]),t._v(" "),s("section",{staticClass:"video-clips"})]),t._v(" "),s("div",[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-7"},[s("br"),t._v(" "),s("label",[t._v("Add file:")]),s("br"),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",name:"title",placeholder:"Titre de la vidéo"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),t._v(" "),s("input",{ref:"file",attrs:{type:"file",name:"video"},on:{change:t.handleFileUpload}}),t._v(" "),s("button",{on:{click:t.postvideo}},[t._v("submit")])])])])])])],1)},staticRenderFns:[]},U=s("VU/8")(q,R,!1,function(t){s("BvSW")},"data-v-5cd1e03f",null).exports,F={props:["stream"],name:"stream",components:{},data:function(){return{user:""}},methods:{},mounted:function(){var t=this;window.axios.get("user/"+this.abonnement.id_streamer).then(function(e){t.user=e.data}).catch(function(t){})}},P={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"column is-3"},[e("img",{staticClass:"Timg",attrs:{src:"http://download.seaicons.com/icons/iconsmind/outline/512/Webcam-icon.png"}}),this._v(" "),e("div",{staticClass:"contentStream"},[e("p",[this._v(this._s(this.stream.nom))]),this._v(" "),0==this.stream.anonyme?e("strong",[this._v(this._s(this.user.pseudo))]):this._e(),this._v(" "),e("i",[1==this.stream.anonyme?e("strong",[this._v("Anonyme")]):this._e()])]),this._v(" "),e("div",{staticClass:"is-size-5 has-text-centered data"},[e("router-link",{staticClass:"button is-success",attrs:{to:{name:"diffusion",params:{id:this.stream.id}}}},[this._v("Regarder")])],1)])},staticRenderFns:[]},V={name:"abonnements",components:{NavBar:d,stream:s("VU/8")(F,P,!1,function(t){s("rNGj")},"data-v-179f53ce",null).exports},data:function(){return{abonnements:"",visiteur:!0}},mounted:function(){var t=this;window.axios.get("streams").then(function(e){t.abonnements=e.data}).catch(function(t){})}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("nav-bar"),this._v(" "),e("section",[this._m(0),this._v(" "),e("div",{staticClass:"columns"},this._l(this.abonnements,function(t){return e("stream",{key:t.id,attrs:{stream:t}})}))])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"is-size-1"},[e("h2",[this._v("Liste des streams en cours")])])}]},B=s("VU/8")(V,A,!1,function(t){s("HMF8")},"data-v-46b5b2d6",null).exports,I={props:["video"],name:"video",components:{NavBar:d},data:function(){return{videos:[]}},methods:{},mounted:function(){var t=this;window.axios.get("video").then(function(e){t.videos=e.data,t.videos.forEach(function(t){t.filename="http://localhost/BoniFlux/uploads/"+t.filename,window.axios.get("user/"+t.id_user).then(function(e){t.profil=e.data}).catch(function(t){console.error(t)})})}).catch(function(t){})}},z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav-bar"),t._v(" "),s("section",{staticClass:"container"},t._l(t.videos,function(e){return s("div",{key:e.id},[s("video",{attrs:{src:e.filename,controls:""}}),t._v(" "),s("button",[t._v(t._s(e.profil.nom))]),t._v(" "),s("h1",[t._v(t._s(e.nom))]),t._v(" "),s("p",[t._v(t._s(e.description))])])}))],1)},staticRenderFns:[]},T=s("VU/8")(I,z,!1,function(t){s("pcFt")},"data-v-742984c8",null).exports;n.a.use(c.a);var D=new c.a({routes:[{path:"/",component:f,name:"accueil"},{path:"/emission",name:"emission",component:g},{path:"/diffusion/:id",name:"diffusion",component:k},{path:"/abonnements",name:"abonnements",component:E},{path:"/record",name:"record",component:U},{path:"/streams",name:"streams",component:B},{path:"/video",name:"video",component:T},{path:"*",component:f}]}),O=s("woOf"),j=s.n(O),H=s("NYxO");n.a.use(H.a);var W=new H.a.Store({state:{member:!1,token:!1},mutations:{setMember:function(t,e){t.member=e},setListeMember:function(t,e){t.listemember=e},setToken:function(t,e){t.token=e},initialiseStore:function(t){localStorage.getItem("store")&&this.replaceState(j()(t,JSON.parse(localStorage.getItem("store"))))},getToken:function(){return state.token}}}),Z=s("mtWM"),J=s.n(Z),Y=s("MdIv"),Q=s.n(Y);n.a.component("v-map",Q.a.Map),n.a.component("v-tilelayer",Q.a.TileLayer),n.a.component("v-marker",Q.a.Marker),window.axios=J.a.create({baseURL:"http://boniflux.texier.tk/api/index.php"}),n.a.config.productionTip=!1,W.subscribe(function(t,e){localStorage.setItem("store",i()(e))}),window.bus=new n.a,new n.a({el:"#app",router:D,store:W,beforeCreate:function(){this.$store.commit("initialiseStore")},template:"<App/>",components:{App:r}})},bhIa:function(t,e){},nYOZ:function(t,e){},oNFK:function(t,e){},pcFt:function(t,e){},q2aQ:function(t,e){},rNGj:function(t,e){},sJDp:function(t,e){},vbkI:function(t,e){},yalm:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.bf7f6944202fa68eaffa.js.map